// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model User {
  id             String          @id @default(uuid())
  email          String          @unique
  passwordHash   String          @map("password_hash")
  name           String
  createdAt      DateTime        @default(now()) @map("created_at")
  updatedAt      DateTime        @updatedAt @map("updated_at")
  watchlistItems WatchlistItem[]

  @@map("users")
}

model WatchlistItem {
  id     String @id @default(uuid())
  userId String @map("user_id")
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  tmdbId    Int    @map("tmdb_id")
  mediaType String @map("media_type") // "movie" | "tv"
  status    String // "plan_to_watch" | "watching" | "watched" | "dropped"

  addedAt   DateTime @default(now()) @map("added_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@unique([userId, tmdbId, mediaType])
  @@map("watchlist_items")
}
